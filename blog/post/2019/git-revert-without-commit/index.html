<!DOCTYPE html>
<html class="no-js">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Git reverts without automatic commit  &middot; Jon Cain</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
    <meta name="description" content="If you have multiple commits that you want to revert but keep things concise under a single commit, this could be the answer you&#39;re looking for." />
  

  <link rel="stylesheet" href="/css/jonifen.css">
</head>
<body>
  <header>
    <div class="container">
      <div class="heading">
        <a href="/">Jon Cain</a>
      </div>
      <div class="nav">
	
	<a href="/"
		class="nav-item"
		
			alt="Home"
			title="Home"
		>Home</a>
	
	<a href="/blog/"
		class="nav-item"
		
			alt="Blog"
			title="Blog"
		>Blog</a>
	
	<a href="/tags/"
		class="nav-item"
		
			alt="Tags"
			title="Tags"
		>Tags</a>
	
	<a href="/contact/"
		class="nav-item"
		
			alt="Contact"
			title="Contact"
		>Contact</a>
	
</div>
    </div>
  </header>
  <div class="page-content">
<div class="post-header">
  <div class="container">
    <div class="content">
      <h2>Git reverts without automatic commit</h2>
      <div class="post-details">
        
  <small>
    Reading time: ~2 minutes (346 words)
  </small>

      </div>
      <div class="post-meta-details">
        <div class="date">
          <small>
	<time datetime="2019-05-23">
		23 May, 2019
	</time>
</small>

        </div>
        <div class="tags">
          
	
		<a href="/tags/programming" class="tag">programming</a>
	
		<a href="/tags/sourcecontrol" class="tag">sourcecontrol</a>
	


        </div>
      </div>
    </div>
  </div>
</div>
<div class="container">
  <div class="content">
    

<p>Git is easily the best source control system I&rsquo;ve ever used, yet it&rsquo;s probably one of the more infuriating too because its power and flexibility can also land the users in a whole world of pain.</p>

<p>Today at work we had a scenario where a colleague needed to revert a handful of commits including a merge but there was a chance it may need re-introducing at a later date. I suggested reverting each commit with <code>--no-commit</code> but nobody else had heard of this argument before, hence I felt a post may be useful (although this probably requires that people visit my blog first to find it haha).</p>

<p>Ok, so normally, you can perform a revert by doing the following:</p>

<pre><code>git revert {commit-id}
</code></pre>

<p>but although this <em>does</em> perform the revert, it also creates a new commit. So what if you wanted to make any amendments to the contents before making this new commit?</p>

<p>Well, you could just add a further commit, but if you wanted to keep things tidier, you could perform the revert as follows:</p>

<pre><code>git revert {commit-id} --no-commit
</code></pre>

<p>This will leave the commit content reverted, and staged, but without a commit. So if you want to make changes at this point, you just do:</p>

<pre><code>git reset
</code></pre>

<p>which will unstage your files ready for changes. You can then commit as you wish.</p>

<h3 id="but-you-said-your-colleague-had-many-commits-to-revert">But you said your colleague had <em>many</em> commits to revert?</h3>

<p>You just revert all the commits that you need reverted, remembering to add <code>--no-commit</code> on each command. You can then reset and create your new single commit which can then be easily reverted in the future if you want things back in place.</p>

<h3 id="ok-so-you-mentioned-something-about-merges">Ok, so you mentioned something about merges?</h3>

<p>You&rsquo;d need to provide further commands to do this, as follows:</p>

<pre><code>git revert -m 1 {commit-id} --no-commit
</code></pre>

<p>The <code>-m</code> identifies that it&rsquo;s a merge commit that you&rsquo;re reverting, and the number <code>1</code> indicates that you want to revert back to the tree of the first parent prior to the merge.</p>

<p>Any questions? <a href="/contact">Get in touch</a>.</p>

<p>And when it comes to git, be careful everyone!</p>

    
  </div>
</div>
      <footer>
        <div class="container">
          <small>
            
              <a href="https://jonifen.co.uk">jonifen.co.uk</a> - Created using <a href="https://gohugo.io">Hugo</a>
            
          </small>
        </div>
      </footer>
    </div>
  </body>
</html>

