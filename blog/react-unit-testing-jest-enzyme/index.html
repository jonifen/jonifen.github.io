<!doctype html><html class=no-js><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.74.3"><title>React.js Unit Testing with Jest and Enzyme &#183; Jon Cain üë®‚Äçüíª (jonifen.co.uk)</title><link rel=preload href=/css/jonifen.min.css as=style><link rel=preload href=/css/jonifen-fonts.min.css as=style><link rel=preload href=/fonts/AleoNormal400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/fonts/OswaldLight300.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/fonts/OswaldNormal400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/fonts/OswaldMedium500.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/fonts/OxygenMonoNormal400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/fonts/SourceSansProNormal400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/fonts/icomoon.woff as=font type=font/woff crossorigin=anonymous><meta property="og:site_name" content="Jon Cain üë®‚Äçüíª (jonifen.co.uk)"><meta property="og:title" content="React.js Unit Testing with Jest and Enzyme"><meta name=description content="I've written loads of unit tests in my lifetime for C# and JavaScript, but never gotten around to writing any for testing the actual React components because there's always been something more pressing. Time to put that right and take the plunge."><meta property="og:description" content="I've written loads of unit tests in my lifetime for C# and JavaScript, but never gotten around to writing any for testing the actual React components because there's always been something more pressing. Time to put that right and take the plunge."><meta property="og:image:secure_url" imageprop=image content="https://jonifen.co.uk/images/og-avatar.png"><meta property="og:type" content="website"><link rel=stylesheet href=/css/jonifen.min.css><link rel=stylesheet href=/css/jonifen-fonts.min.css></head><body><a name=top></a><a href=#top class=back-to-top style=display:none><div></div></a><header id=header><div class=container><div class=heading><a href=/>jonifen</a></div><ul class=nav><li class=nav-item><a href=/blog/ alt=Blog title=Blog><span>Blog</span></a></li><li class=nav-item><a href=/notes/ alt=Notes title=Notes><span>Notes</span></a></li><li class=nav-item><a href=/projects/ alt=Projects title=Projects><span>Projects</span></a></li><li class=nav-item><a href=/about/ alt=About title=About><span>About</span></a></li></ul></div></header><div class=page-content><div class=post-header><div class=container><div class=content><h2>React.js Unit Testing with Jest and Enzyme</h2><small><time datetime=2017-12-07>7 December, 2017</time>
&#183; Reading time: ~3 minute(s) (524 words)</small>
<a href=/tags/programming class=tag>programming</a>
<a href=/tags/javascript class=tag>javascript</a>
<a href=/tags/reactjs class=tag>reactjs</a>
<a href=/tags/testing class=tag>testing</a></div></div></div><div class=container><div class=main-content><p>I&rsquo;ve written loads of unit tests in my lifetime for C# and JavaScript, but never gotten around to writing any for testing the actual React components because there&rsquo;s always been something more pressing. Time to put that right and take the plunge.</p><p>So I&rsquo;ve picked up the project which resulted from the <a href=/blog/post/2017/react-js-state/>React.js Continued&mldr; State!</a> tutorial as a starter for ten as it already has a lot of the boilerplate stuff in place.</p><p>I need to point out at this point that I&rsquo;ve updated the npm packages so I&rsquo;m using React 16 as well as the latest versions of other things:</p><ul><li>babel-preset-es2015 has been deprecated and replaced with babel-preset-env so I&rsquo;ve made the following change to the webpack.config.js in the rule I created for .js files:</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=color:#a6e22e>options</span><span style=color:#f92672>:</span> {
  <span style=color:#a6e22e>presets</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;react&#34;</span>, <span style=color:#e6db74>&#34;env&#34;</span>]
}
</code></pre></td></tr></table></div></div><p>So now that&rsquo;s done, I need to install the required packages:</p><pre><code>npm install --save-dev jest enzyme enzyme-adapter-react-16
</code></pre><p>These packages are for <a href=https://facebook.github.io/jest/>Jest</a>, <a href=https://github.com/airbnb/enzyme>Enzyme</a> and the Adapter so Enzyme can support React 16 - notice that I mentioned I upgraded the npm packages earlier? ;)</p><p>As Jest and Enzyme don&rsquo;t use Webpack to get the Babel options, I have to create a .babelrc file in the root of the project folder, which will contain the following:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js>{
  <span style=color:#e6db74>&#34;presets&#34;</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;react&#34;</span>, <span style=color:#e6db74>&#34;env&#34;</span>]
}
</code></pre></td></tr></table></div></div><p>to enable support for React and the &ldquo;env&rdquo; plugin (that superceded the es2015 plugin).</p><p>So with all that set up, let&rsquo;s create our first test!</p><p>Create a directory in the project root called &ldquo;__tests__&rdquo; (yes, this is a double underscore before and after) and inside there, create a new file called &ldquo;comments.js&rdquo; and inside there, dump the following content:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;react&#34;</span>
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Enzyme</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;enzyme&#34;</span>
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Adapter</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;enzyme-adapter-react-16&#34;</span>
<span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>mount</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;enzyme&#34;</span>
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Comments</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;./../components/comments.jsx&#34;</span>

<span style=color:#a6e22e>Enzyme</span>.<span style=color:#a6e22e>configure</span>({ <span style=color:#a6e22e>adapter</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Adapter</span>() })

<span style=color:#a6e22e>describe</span>(<span style=color:#e6db74>&#34;Comments&#34;</span>, () =&gt; {
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>props</span>

  <span style=color:#a6e22e>beforeEach</span>(() =&gt; {
    <span style=color:#a6e22e>props</span> <span style=color:#f92672>=</span> {
      <span style=color:#a6e22e>heading</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Previous comments:&#34;</span>
    }
  })

  <span style=color:#75715e>//--- All tests go below this line ---
</span><span style=color:#75715e></span>  <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#34;always renders a div&#34;</span>, () =&gt; {
    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>divs</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mount</span>(<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Comments</span> {...<span style=color:#a6e22e>props</span>} <span style=color:#f92672>/&gt;</span>).<span style=color:#a6e22e>find</span>(<span style=color:#e6db74>&#34;div&#34;</span>)
    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>divs</span>.<span style=color:#a6e22e>length</span>).<span style=color:#a6e22e>toBeGreaterThan</span>(<span style=color:#ae81ff>0</span>)
  })
})
</code></pre></td></tr></table></div></div><p>Ok, so let me explain a little about what this is trying to do.</p><ul><li>You&rsquo;ve got the normal imports at the top which are bringing in the bits and pieces that are needed within the rest of the code</li><li>We have to configure Enzyme to use the adapter for React 16</li><li>We now instruct Jest that we&rsquo;re about to be describing the Comments component and create an arrow function for the tests to reside.</li><li>We create a &ldquo;beforeEach&rdquo; function which will run before each and every test within the container.</li><li>We then declare a test, that we expect the Comments component to contain at least one div element within it (yes, it&rsquo;s a really simple test, but we have to start somewhere&mldr; right?)</li></ul><p>I&rsquo;ll be spending a bit more time over the next couple of weeks looking at unit testing React components so may update this post if I find a better way of doing things.</p></div></div><footer><div class=container><div class=footer-icons><a href=https://github.com/jonifen/ target=_blank rel="noopener noreferrer"><span class=icon-github></span></a><a href=https://twitter.com/jonifen/ target=_blank rel="noopener noreferrer"><span class=icon-twitter></span></a><a href=https://linkedin.com/in/jonifen/ target=_blank rel="noopener noreferrer"><span class=icon-linkedin2></span></a><a href=https://www.reddit.com/user/jonifen target=_blank rel="noopener noreferrer"><span class=icon-reddit></span></a><a href=http://stackoverflow.com/users/3157725/jonifen target=_blank rel="noopener noreferrer"><span class=icon-stackoverflow></span></a><a href="mailto:hello@jonifen.co.uk?subject=Contact%20from%20your%20website" target=_blank><span class=icon-mail2></span></a></div><p><a href=https://jonifen.co.uk>jonifen.co.uk</a> - Created using <a href=https://gohugo.io>Hugo</a></p></div></footer></div></body></html>